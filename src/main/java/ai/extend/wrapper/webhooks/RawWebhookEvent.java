/**
 * Custom wrapper code - not auto-generated by Fern.
 */
package ai.extend.wrapper.webhooks;

import ai.extend.types.WebhookEvent;

/**
 * Union type representing either a normal typed webhook event or one with a signed URL payload.
 *
 * <p>This is the Java equivalent of TypeScript's {@code RawWebhookEvent} and Python's
 * {@code RawWebhookEvent}. Use {@link #isSignedUrlEvent()} to narrow the type, then call
 * {@link #getEvent()} or {@link #getSignedUrlEvent()} as appropriate.</p>
 *
 * <h3>Usage</h3>
 * <pre>{@code
 * RawWebhookEvent raw = webhooks.verifyAndParseWithOptions(body, headers, secret,
 *     VerifyAndParseOptions.builder().allowSignedUrl(true).build());
 *
 * if (raw.isSignedUrlEvent()) {
 *     WebhookEventWithSignedUrl signedEvent = raw.getSignedUrlEvent();
 *     WebhookEvent full = webhooks.fetchSignedPayload(signedEvent);
 * } else {
 *     WebhookEvent event = raw.getEvent();
 *     event.visit(...);
 * }
 * }</pre>
 */
public interface RawWebhookEvent {

    /**
     * Returns true if this is a signed URL event (payload delivered via URL).
     */
    boolean isSignedUrlEvent();

    /**
     * Returns the typed webhook event when this is a normal (inline) event.
     *
     * @throws IllegalStateException if this is a signed URL event
     */
    WebhookEvent getEvent();

    /**
     * Returns the signed URL event when the payload was delivered via URL.
     *
     * @throws IllegalStateException if this is not a signed URL event
     */
    WebhookEventWithSignedUrl getSignedUrlEvent();

    /**
     * Returns the event ID (works for both normal and signed URL events).
     */
    String getEventId();

    /**
     * Returns the event type string (e.g. "workflow_run.completed").
     */
    String getEventType();
}
