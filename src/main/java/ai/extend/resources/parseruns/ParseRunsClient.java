/**
 * This file was auto-generated by Fern from our API Definition.
 */
package ai.extend.resources.parseruns;

import ai.extend.core.ClientOptions;
import ai.extend.core.RequestOptions;
import ai.extend.resources.parseruns.requests.ParseRunsCreateRequest;
import ai.extend.resources.parseruns.requests.ParseRunsRetrieveRequest;
import ai.extend.resources.parseruns.types.ParseRunsDeleteResponse;
import ai.extend.types.ParseRun;

public class ParseRunsClient {
    protected final ClientOptions clientOptions;

    private final RawParseRunsClient rawClient;

    public ParseRunsClient(ClientOptions clientOptions) {
        this.clientOptions = clientOptions;
        this.rawClient = new RawParseRunsClient(clientOptions);
    }

    /**
     * Get responses with HTTP metadata like headers
     */
    public RawParseRunsClient withRawResponse() {
        return this.rawClient;
    }

    /**
     * Parse files to get cleaned, chunked target content (e.g. markdown).
     * <p>The Parse endpoint allows you to convert documents into structured, machine-readable formats with fine-grained control over the parsing process. This endpoint is ideal for extracting cleaned document content to be used as context for downstream processing, e.g. RAG pipelines, custom ingestion pipelines, embeddings classification, etc.</p>
     * <p>For more details, see the <a href="https://docs.extend.ai/2026-02-09/product/parsing/parse">Parse File guide</a>. See <a href="https://docs.extend.ai/2026-02-09/developers/async-processing">Async Processing</a> for a full guide on polling helpers and webhooks.</p>
     * <h2>Polling with the SDK</h2>
     * <p>The SDK provides a <code>createAndPoll</code> / <code>create_and_poll</code> method that handles polling automatically, returning when the run reaches a terminal state (<code>PROCESSED</code> or <code>FAILED</code>):</p>
     * <p>&lt;Tabs&gt;
     * &lt;Tab title=&quot;TypeScript&quot;&gt;
     * ```typescript
     * const result = await client.parseRuns.createAndPoll({
     *   file: { url: &quot;https://...&quot; }
     * });
     * // Returns when the run reaches a terminal state
     * console.log(result.output);
     * ```
     * &lt;/Tab&gt;
     * &lt;Tab title=&quot;Python&quot;&gt;
     * ```python
     * result = client.parse_runs.create_and_poll(
     *     file={&quot;url&quot;: &quot;https://...&quot;}
     * )
     * # Returns when the run reaches a terminal state
     * print(result.output)
     * ```
     * &lt;/Tab&gt;
     * &lt;Tab title=&quot;Java&quot;&gt;
     * ```java
     * var result = client.parseRuns().createAndPoll(ParseRunCreateRequest.builder()
     *     .file(FileInput.builder().url(&quot;https://...&quot;).build())
     *     .build());
     * // Returns when the run reaches a terminal state
     * System.out.println(result.getOutput());
     * ```
     * &lt;/Tab&gt;
     * &lt;/Tabs&gt;</p>
     */
    public ParseRun create(ParseRunsCreateRequest request) {
        return this.rawClient.create(request).body();
    }

    /**
     * Parse files to get cleaned, chunked target content (e.g. markdown).
     * <p>The Parse endpoint allows you to convert documents into structured, machine-readable formats with fine-grained control over the parsing process. This endpoint is ideal for extracting cleaned document content to be used as context for downstream processing, e.g. RAG pipelines, custom ingestion pipelines, embeddings classification, etc.</p>
     * <p>For more details, see the <a href="https://docs.extend.ai/2026-02-09/product/parsing/parse">Parse File guide</a>. See <a href="https://docs.extend.ai/2026-02-09/developers/async-processing">Async Processing</a> for a full guide on polling helpers and webhooks.</p>
     * <h2>Polling with the SDK</h2>
     * <p>The SDK provides a <code>createAndPoll</code> / <code>create_and_poll</code> method that handles polling automatically, returning when the run reaches a terminal state (<code>PROCESSED</code> or <code>FAILED</code>):</p>
     * <p>&lt;Tabs&gt;
     * &lt;Tab title=&quot;TypeScript&quot;&gt;
     * ```typescript
     * const result = await client.parseRuns.createAndPoll({
     *   file: { url: &quot;https://...&quot; }
     * });
     * // Returns when the run reaches a terminal state
     * console.log(result.output);
     * ```
     * &lt;/Tab&gt;
     * &lt;Tab title=&quot;Python&quot;&gt;
     * ```python
     * result = client.parse_runs.create_and_poll(
     *     file={&quot;url&quot;: &quot;https://...&quot;}
     * )
     * # Returns when the run reaches a terminal state
     * print(result.output)
     * ```
     * &lt;/Tab&gt;
     * &lt;Tab title=&quot;Java&quot;&gt;
     * ```java
     * var result = client.parseRuns().createAndPoll(ParseRunCreateRequest.builder()
     *     .file(FileInput.builder().url(&quot;https://...&quot;).build())
     *     .build());
     * // Returns when the run reaches a terminal state
     * System.out.println(result.getOutput());
     * ```
     * &lt;/Tab&gt;
     * &lt;/Tabs&gt;</p>
     */
    public ParseRun create(ParseRunsCreateRequest request, RequestOptions requestOptions) {
        return this.rawClient.create(request, requestOptions).body();
    }

    /**
     * Retrieve the status and results of a parse run.
     * <p>Use this endpoint to get results for a parse run that has already completed, or to check on the status of a parse run initiated by the <a href="https://docs.extend.ai/2026-02-09/developers/api-reference/endpoints/parse/create-parse-run">Create Parse Run</a> endpoint.</p>
     */
    public ParseRun retrieve(String id) {
        return this.rawClient.retrieve(id).body();
    }

    /**
     * Retrieve the status and results of a parse run.
     * <p>Use this endpoint to get results for a parse run that has already completed, or to check on the status of a parse run initiated by the <a href="https://docs.extend.ai/2026-02-09/developers/api-reference/endpoints/parse/create-parse-run">Create Parse Run</a> endpoint.</p>
     */
    public ParseRun retrieve(String id, RequestOptions requestOptions) {
        return this.rawClient.retrieve(id, requestOptions).body();
    }

    /**
     * Retrieve the status and results of a parse run.
     * <p>Use this endpoint to get results for a parse run that has already completed, or to check on the status of a parse run initiated by the <a href="https://docs.extend.ai/2026-02-09/developers/api-reference/endpoints/parse/create-parse-run">Create Parse Run</a> endpoint.</p>
     */
    public ParseRun retrieve(String id, ParseRunsRetrieveRequest request) {
        return this.rawClient.retrieve(id, request).body();
    }

    /**
     * Retrieve the status and results of a parse run.
     * <p>Use this endpoint to get results for a parse run that has already completed, or to check on the status of a parse run initiated by the <a href="https://docs.extend.ai/2026-02-09/developers/api-reference/endpoints/parse/create-parse-run">Create Parse Run</a> endpoint.</p>
     */
    public ParseRun retrieve(String id, ParseRunsRetrieveRequest request, RequestOptions requestOptions) {
        return this.rawClient.retrieve(id, request, requestOptions).body();
    }

    /**
     * Delete a parse run and all associated data from Extend. This operation is permanent and cannot be undone.
     * <p>This endpoint can be used if you'd like to manage data retention on your own rather than automated data retention policies. Or make one-off deletions for your downstream customers.</p>
     */
    public ParseRunsDeleteResponse delete(String id) {
        return this.rawClient.delete(id).body();
    }

    /**
     * Delete a parse run and all associated data from Extend. This operation is permanent and cannot be undone.
     * <p>This endpoint can be used if you'd like to manage data retention on your own rather than automated data retention policies. Or make one-off deletions for your downstream customers.</p>
     */
    public ParseRunsDeleteResponse delete(String id, RequestOptions requestOptions) {
        return this.rawClient.delete(id, requestOptions).body();
    }
}
